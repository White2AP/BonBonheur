#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
æƒ…ç»ªæ£€æµ‹é›†æˆæµ‹è¯•è„šæœ¬
æµ‹è¯•æ¡Œå® çš„æƒ…ç»ªæ„ŸçŸ¥åŠŸèƒ½
"""

import tkinter as tk
from main import DesktopPet

def test_emotion_detection():
    """æµ‹è¯•æƒ…ç»ªæ£€æµ‹åŠŸèƒ½"""
    print("=" * 60)
    print("æ¡Œå® æƒ…ç»ªæ£€æµ‹é›†æˆæµ‹è¯•")
    print("=" * 60)
    
    print("âœ… æ–°å¢åŠŸèƒ½:")
    print("1. æƒ…ç»ªæ£€æµ‹ç³»ç»Ÿé›†æˆ")
    print("2. èŠå¤©æ—¶è‡ªåŠ¨åˆ†æç”¨æˆ·æƒ…ç»ª")
    print("3. æ ¹æ®å¿ƒæƒ…è°ƒæ•´æ—¥ç¨‹å®‰æ’ç­–ç•¥")
    print("4. ç•ªèŒ„é’Ÿç»“æŸåæƒ…ç»ªé¢„æµ‹ä¸“æ³¨åº¦")
    print("5. å–æ¶ˆåŠŸèƒ½å‡çº§å¼¹çª—")
    
    print("\nğŸ­ æƒ…ç»ªæ„ŸçŸ¥åŠŸèƒ½:")
    print("- å¿ƒæƒ…å¥½ï¼šä¿æŒæ­£å¸¸æ—¥ç¨‹å®‰æ’")
    print("- å¿ƒæƒ…å·®ï¼šå‡å°‘40%çš„æ—¥ç¨‹å®‰æ’")
    print("- ä¸­æ€§ï¼šç¨å¾®å‡å°‘20%çš„æ—¥ç¨‹å®‰æ’")
    
    print("\nğŸ“Š ä¸“æ³¨åº¦é¢„æµ‹:")
    print("- ç§¯ææƒ…ç»ªï¼š85%ä¸“æ³¨åº¦")
    print("- å¿«ä¹æƒ…ç»ªï¼š90%ä¸“æ³¨åº¦")
    print("- æ¶ˆææƒ…ç»ªï¼š45%ä¸“æ³¨åº¦")
    print("- æ‚²ä¼¤æƒ…ç»ªï¼š40%ä¸“æ³¨åº¦")
    
    print("\nğŸ§ª æµ‹è¯•æ­¥éª¤:")
    print("1. å¯åŠ¨æ¡Œå® ")
    print("2. ç‚¹å‡»'BonbonheurèŠå¤©'")
    print("3. å‘é€ä¸åŒæƒ…ç»ªçš„æ¶ˆæ¯æµ‹è¯•æƒ…ç»ªåˆ†æ")
    print("4. ç‚¹å‡»'æ™ºèƒ½æ—¥ç¨‹ç®¡ç†'æµ‹è¯•æƒ…ç»ªæ„ŸçŸ¥ä¼˜åŒ–")
    print("5. å¯åŠ¨ç•ªèŒ„é’Ÿæµ‹è¯•æƒ…ç»ªé¢„æµ‹ä¸“æ³¨åº¦")
    
    print("\nğŸ’¬ æµ‹è¯•æ¶ˆæ¯ç¤ºä¾‹:")
    print("- ç§¯æï¼š'ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œæˆ‘å¾ˆå¼€å¿ƒï¼'")
    print("- æ¶ˆæï¼š'å·¥ä½œå‹åŠ›å¤ªå¤§äº†ï¼Œæ„Ÿè§‰å¾ˆç´¯'")
    print("- æ‚²ä¼¤ï¼š'æœ€è¿‘é‡åˆ°ä¸€äº›å›°éš¾ï¼Œå¿ƒæƒ…ä¸å¤ªå¥½'")
    print("- å…´å¥‹ï¼š'åˆšæ”¶åˆ°å¥½æ¶ˆæ¯ï¼Œå¤ªæ£’äº†ï¼'")
    
    print("\nğŸš€ å¯åŠ¨æ¡Œå® ...")
    
    try:
        root = tk.Tk()
        pet = DesktopPet(root)
        
        # æµ‹è¯•æƒ…ç»ªæ£€æµ‹ç³»ç»Ÿ
        if pet.emotion_detector:
            print("âœ… æƒ…ç»ªæ£€æµ‹ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ")
            
            # æµ‹è¯•å‡ ä¸ªç¤ºä¾‹
            test_texts = [
                "ä»Šå¤©å¤©æ°”çœŸå¥½ï¼Œæˆ‘å¾ˆå¼€å¿ƒï¼",
                "å·¥ä½œå‹åŠ›å¤ªå¤§äº†ï¼Œæ„Ÿè§‰å¾ˆç´¯",
                "æœ€è¿‘é‡åˆ°ä¸€äº›å›°éš¾ï¼Œå¿ƒæƒ…ä¸å¤ªå¥½",
                "åˆšæ”¶åˆ°å¥½æ¶ˆæ¯ï¼Œå¤ªæ£’äº†ï¼"
            ]
            
            print("\nğŸ§ª æƒ…ç»ªåˆ†ææµ‹è¯•:")
            for text in test_texts:
                emotion, confidence = pet.analyze_user_emotion(text)
                adjustment = pet.get_mood_adjustment_factor()
                predicted_focus = pet.predict_focus_from_emotion(emotion, confidence)
                
                print(f"æ–‡æœ¬: {text}")
                print(f"  æƒ…ç»ª: {emotion} (ç½®ä¿¡åº¦: {confidence:.2f})")
                print(f"  æ—¥ç¨‹è°ƒæ•´å› å­: {adjustment:.2f}")
                print(f"  é¢„æµ‹ä¸“æ³¨åº¦: {predicted_focus:.2f}")
                print()
        else:
            print("âš ï¸ æƒ…ç»ªæ£€æµ‹ç³»ç»Ÿåˆå§‹åŒ–å¤±è´¥")
        
        print("âœ… æ¡Œå® å¯åŠ¨æˆåŠŸï¼å¼€å§‹æµ‹è¯•æƒ…ç»ªæ„ŸçŸ¥åŠŸèƒ½")
        root.mainloop()
        
    except Exception as e:
        print(f"âŒ å¯åŠ¨å¤±è´¥: {e}")
        import traceback
        traceback.print_exc()

if __name__ == "__main__":
    test_emotion_detection() 